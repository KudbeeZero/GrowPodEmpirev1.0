#:schema node_modules/wrangler/config-schema.json
name = "growpodempire"
main = "dist/index.js"
compatibility_date = "2026-01-30"
compatibility_flags = ["nodejs_compat"]

# Skip wrangler's built-in esbuild bundling since we pre-bundle via script/build.ts
no_bundle = true

# Cloudflare Account ID
account_id = "b591c2e07ca352d33076f4d2f8414b89"

# Domain Code ID (for reference): 85a5b265570a47e66762a07932ce8aa8

[observability]
enabled = true

# D1 Database Binding
# This will be bound to your worker and accessible via env.DB
[[d1_databases]]
binding = "DB"
database_name = "growpod-primary"
database_id = "712d926f-c396-473f-96d9-f0dfc3d1d069"

# Environment Variables (non-sensitive)
[vars]
NODE_ENV = "production"

# Secrets (sensitive data) should be set using:
# wrangler secret put VARIABLE_NAME
# Example secrets to configure:
# - DATABASE_URL (if using external PostgreSQL instead of D1)
# - ADMIN_WALLET_ADDRESS (TestNet: ZK55X7SGIGMLGORVNJHHPTYZMZOGSQNVROBHX7N27X6ZEQRHAZ2UPKOXQU)
# - ALGO_MNEMONIC (for contract deployment - TestNet only, never commit)
# - Any API keys or sensitive credentials

# Build configuration
# Note: Build is handled by GitHub Actions workflow before deployment
# If deploying manually, run: BUILD_TARGET=worker npm run build

# Assets configuration for static files
[assets]
directory = "./dist/public"
binding = "ASSETS"
